kafka:
  # KRaft mode configuration for Kafka 4.0
  # This chart uses KRaft by default (no Zookeeper required)

  ## Global parameters
  global:
    imageRegistry: ""
    imagePullSecrets: []
    defaultStorageClass: ""
    security:
      allowInsecureImages: true

  ## Kafka image - using ECR public registry (docker.io/bitnami requires subscription)
  image:
    registry: public.ecr.aws
    repository: bitnami/kafka
    tag: 3.9.0-debian-12-r4
    pullPolicy: IfNotPresent

  ## KRaft configuration
  # clusterId will be auto-generated on first initialization if not set
  clusterId: ""
  # kraftVersion: 0 = static quorum (controller.quorum.voters), 1 = dynamic quorum
  # Using static quorum for Kafka 3.9 compatibility
  kraftVersion: 0

  ## Listener configuration - using PLAINTEXT for development simplicity
  listeners:
    client:
      containerPort: 9092
      protocol: PLAINTEXT
      name: CLIENT
    controller:
      name: CONTROLLER
      containerPort: 9093
      protocol: PLAINTEXT
    interbroker:
      containerPort: 9094
      protocol: PLAINTEXT
      name: INTERNAL
    external:
      containerPort: 9095
      protocol: PLAINTEXT
      name: EXTERNAL

  ## SASL configuration - disabled for development
  sasl:
    enabledMechanisms: PLAIN,SCRAM-SHA-256,SCRAM-SHA-512
    interBrokerMechanism: PLAIN
    controllerMechanism: PLAIN
    client:
      users:
        - user1
      passwords: ""

  ## TLS configuration - disabled for development
  tls:
    type: JKS
    autoGenerated:
      enabled: false

  ## Controller-eligible nodes configuration
  controller:
    # Number of controller-eligible nodes (minimum 1 for development)
    replicaCount: 1
    # When false, controller nodes also act as brokers
    controllerOnly: false
    # Minimum node ID for controllers
    minId: 0

    ## Persistence configuration
    persistence:
      enabled: true
      storageClass: ""
      accessModes:
        - ReadWriteOnce
      size: 8Gi

    ## Resource configuration
    resourcesPreset: "small"

  ## Broker-only nodes configuration (separate from controllers)
  broker:
    # No separate broker nodes - controllers act as brokers
    replicaCount: 0

    ## Persistence configuration
    persistence:
      enabled: true
      storageClass: ""
      accessModes:
        - ReadWriteOnce
      size: 8Gi

  ## Service configuration
  service:
    type: ClusterIP
    ports:
      client: 9092
      controller: 9093
      interbroker: 9094
      external: 9095

  ## External access - disabled for development
  externalAccess:
    enabled: false

  ## Metrics configuration
  metrics:
    kafka:
      enabled: false
    jmx:
      enabled: false
    serviceMonitor:
      enabled: false

  ## Provisioning - disabled
  provisioning:
    enabled: false

  ## Network policy - disabled for development
  networkPolicy:
    enabled: false

  ## Extra configuration for single-broker development setup
  extraConfig: |-
    offsets.topic.replication.factor=1
    offsets.topic.num.partitions=1
    transaction.state.log.replication.factor=1
    transaction.state.log.min.isr=1
    default.replication.factor=1
    min.insync.replicas=1
    num.partitions=1
    log.cleanup.policy=compact

  ## Extra environment variables for Kafka
  extraEnvVars:
    - name: KAFKA_CFG_OFFSETS_TOPIC_REPLICATION_FACTOR
      value: "1"
    - name: KAFKA_CFG_TRANSACTION_STATE_LOG_REPLICATION_FACTOR
      value: "1"
    - name: KAFKA_CFG_TRANSACTION_STATE_LOG_MIN_ISR
      value: "1"
    - name: KAFKA_CFG_DEFAULT_REPLICATION_FACTOR
      value: "1"
    - name: KAFKA_CFG_MIN_INSYNC_REPLICAS
      value: "1"
    - name: KAFKA_CFG_OFFSETS_TOPIC_NUM_PARTITIONS
      value: "1"
    - name: KAFKA_CFG_NUM_PARTITIONS
      value: "1"
# KRaft mode configuration for Kafka 4.0
# This chart uses KRaft by default (no Zookeeper required)

## Global parameters
global:
  imageRegistry: ""
  imagePullSecrets: []
  defaultStorageClass: ""

## Kafka image
image:
  registry: docker.io
  repository: bitnami/kafka
  tag: 4.0.0-debian-12-r10
  pullPolicy: IfNotPresent

## KRaft configuration
# clusterId will be auto-generated on first initialization if not set
clusterId: ""
# kraftVersion: 1 = dynamic quorum (default), 0 = static quorum (for migration from 3.x)
kraftVersion: 1

## Listener configuration - using PLAINTEXT for development simplicity
listeners:
  client:
    containerPort: 9092
    protocol: PLAINTEXT
    name: CLIENT
  controller:
    name: CONTROLLER
    containerPort: 9093
    protocol: PLAINTEXT
  interbroker:
    containerPort: 9094
    protocol: PLAINTEXT
    name: INTERNAL
  external:
    containerPort: 9095
    protocol: PLAINTEXT
    name: EXTERNAL

## SASL configuration - disabled for development
sasl:
  enabledMechanisms: PLAIN,SCRAM-SHA-256,SCRAM-SHA-512
  interBrokerMechanism: PLAIN
  controllerMechanism: PLAIN
  client:
    users:
      - user1
    passwords: ""

## TLS configuration - disabled for development
tls:
  type: JKS
  autoGenerated:
    enabled: false

## Controller-eligible nodes configuration
controller:
  # Number of controller-eligible nodes (minimum 1 for development)
  replicaCount: 1
  # When false, controller nodes also act as brokers
  controllerOnly: false
  # Minimum node ID for controllers
  minId: 0

  ## Persistence configuration
  persistence:
    enabled: true
    storageClass: ""
    accessModes:
      - ReadWriteOnce
    size: 8Gi

  ## Resource configuration
  resourcesPreset: "small"

## Broker-only nodes configuration (separate from controllers)
broker:
  # No separate broker nodes - controllers act as brokers
  replicaCount: 0

  ## Persistence configuration
  persistence:
    enabled: true
    storageClass: ""
    accessModes:
      - ReadWriteOnce
    size: 8Gi

## Service configuration
service:
  type: ClusterIP
  ports:
    client: 9092
    controller: 9093
    interbroker: 9094
    external: 9095

## External access - disabled for development
externalAccess:
  enabled: false

## Metrics configuration
metrics:
  kafka:
    enabled: false
  jmx:
    enabled: false
  serviceMonitor:
    enabled: false

## Provisioning - disabled
provisioning:
  enabled: false

## Network policy - disabled for development
networkPolicy:
  enabled: false
